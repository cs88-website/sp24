<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="viewport" content="width=device-width">

    <meta name="description" content ="C88C: Computational Structures in Data Science" />
    <meta name="keywords" content ="CS88, C88C, Computer Science, Data Science, Programming, Berkeley, EECS, Python, intro CS, comp sci" />
    <meta name="author" content ="Michael Ball, Ethan Yoo, Rebecca Dang, Michelle Chen, Ramya Chitturi, John Teng, Karim El-Refai, Liliana Gonzalez, Angela Bi, Sean Yang, Christy Quang, Morgan Dehdashti, Miha Bhaskaran, Satleen Gill, Richik Pal, Meng-Han Wu, Nicholas Chae" />

    <link rel="stylesheet" href="/sp24/assets/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="/sp24/assets/css/style.css">
    <link rel="icon" href="/sp24/assets/images/favicon.ico">
    <link rel="stylesheet" href="/sp24/assets/css/mono-blue.css">

    <link rel="stylesheet" type="text/css" href="/sp24/assets/css/resource.css" />
<link rel="stylesheet" type="text/css" href="../../assets/css/hw.css"/>


    <title>Homework 8 Solutions | C88C Spring 2024</title>

  </head>

  <body id="index" class="home">
    <nav class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse-section" aria-label="Toggle Nav Menu" aria-expanded="false">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/sp24/">C88C</a>
        </div>

        <div class="collapse navbar-collapse" id="navbar-collapse-section">
          <ul class="nav navbar-nav navbar-right">
            <li><a href="/sp24/">Calendar</a></li>
            <li><a href="/sp24/articles/resources.html">Resources</a></li>
            <li><a href="/sp24/weekly-schedule.html">Google Calendar</a></li>
            <li><a href="/sp24/articles/about.html">Syllabus</a></li>
            <li><a href="https://edstem.org/us/courses/51226/discussion/" target="_blank">Ed</a></li>
            <li><a href="/sp24/staff.html">Staff</a></li>
            <li><a href="https://oh.c88c.org/" target="_blank">OH Queue</a></li>
            <li><a href="https://tutor.cs61a.org/" target="_blank">Python Tutor</a></li>
            <li><a href="https://bcourses.berkeley.edu/courses/1531774/external_tools/90481" target="_blank">Recordings</a></li>
          </ul>
        </div>
      </div>
    </nav>

    

    <div id="content" class="container">
      <div class='row'>
  <div class='col-md-9'>
    <div class='page-header'>
      <div class="row row-no-gutters">
    <div class="col-md-8">
        <h1 class="content-title-brand" style="padding-top: 0;">
            Homework 8 Solutions
        </h1>
    </div>
    <div class="col-md-4">
        <a class="h1 btn btn-lg" href="hw08.py">hw08.py solution</a>
    </div>
</div>
    </div>

    

    


<h2 id="inheritance">Inheritance</h2>


<h3 class="question" id="q1">Question 1: Errors</h3>

<p>It is often said that nothing in life is certain but death and taxes. For a programmer or data scientist, however, nothing is certain but encountering errors.</p>

<p>In Python, there are two primary types of errors, both of which you are likely familiar with: syntax errors and exceptions. Syntax errors occur when the proper structure of the language is not followed, while exceptions are errors that occur during the execution of a program. These include errors such as <code>ZeroDivisionError</code>, <code>TypeError</code>, <code>NameError</code>, and many more!</p>

<p>Under the hood, all exceptions are objects. If you're interested in more detailed explanations of the structure of exceptions as well as how to create your own, check out this <a href="https://docs.python.org/2/library/exceptions.html">article</a> from the Python documentation! In the meantime, we'll implement our own version of an <code>Error</code> class</p>

<p>Complete the <code>Error</code>, <code>SyntaxError</code>, and <code>ZeroDivisionError</code> classes such that
they create the correct messages when called.</p>

<ul>
  <li>The <code>SyntaxError</code> and <code>ZeroDivisionError</code> classes inherit from the <code>Error</code> class and add functionality that is unique to those particular errors. Their code is partially implemented for you.</li>
  <li>The <code>add_code</code> method adds a new helpful message to your error, while the <code>write</code> method should print the output that you see when an error is raised. Do not worry if that code already is already defined; for this problem, it is safe to overwrite it.</li>
  <li>You can access the parent class methods using the <a href="https://docs.python.org/3/library/functions.html#super">super()</a> function</li>
</ul>

<solution>

<pre><code>class Error:
    &quot;&quot;&quot;
    &gt;&gt;&gt; err1 = Error(12, &quot;error.py&quot;)
    &gt;&gt;&gt; err1.write()
    error.py:12
    &quot;&quot;&quot;
    def __init__(self, line, file):
<span class="sol-highlight">        self.line = line
        self.file = file</span>

    def format(self):
        return self.file + &#x27;:&#x27; + str(self.line)

    def write(self):
        print(self.format())

class SyntaxError(Error):
    &quot;&quot;&quot;
    &gt;&gt;&gt; err1 = SyntaxError(17, &quot;lab10.py&quot;)
    &gt;&gt;&gt; err1.write()
    lab10.py:17 SyntaxError : Invalid syntax
    &gt;&gt;&gt; err1.add_code(4, &quot;EOL while scanning string literal&quot;)
    &gt;&gt;&gt; err2 = SyntaxError(18, &quot;lab10.py&quot;, 4)
    &gt;&gt;&gt; err2.write()
    lab10.py:18 SyntaxError : EOL while scanning string literal
    &quot;&quot;&quot;
    type = &#x27;SyntaxError&#x27;
    msgs = {0 : &quot;Invalid syntax&quot;, 1: &quot;Unmatched parentheses&quot;, 2: &quot;Incorrect indentation&quot;, 3: &quot;missing colon&quot;}

    def __init__(self, line, file, code=0):
<span class="sol-highlight">        super().__init__(line, file)
        self.message = self.msgs[code]</span>

    def format(self):
<span class="sol-highlight">        return super().format() + &#x27; &#x27; + self.type + &quot; : &quot; + self.message # or SyntaxError.msgs[self.code]</span>

    def add_code(self, code, msg):
<span class="sol-highlight">        SyntaxError.msgs[code] = msg</span>

class ZeroDivisionError(Error):
    &quot;&quot;&quot;
    &gt;&gt;&gt; err1 = ZeroDivisionError(273, &quot;lab10.py&quot;)
    &gt;&gt;&gt; err1.write()
    lab10.py:273 ZeroDivisionError : division by zero
    &quot;&quot;&quot;
    type = &#x27;ZeroDivisionError&#x27;

    def __init__(self, line, file, message=&#x27;division by zero&#x27;):
<span class="sol-highlight">        super().__init__(line, file)
        self.message = message</span>

    def format(self):
        end = self.type + &#x27; : &#x27; + self.message
<span class="sol-highlight">        return super().format() + &quot; &quot; + end</span></code></pre>

</solution>

<p>Use OK to test your code:</p><pre class="pre-copy-block"><code>python3 ok -q Error</code></pre>
<p>Use OK to test your code:</p><pre class="pre-copy-block"><code>python3 ok -q SyntaxError</code></pre>
<p>Use OK to test your code:</p><pre class="pre-copy-block"><code>python3 ok -q ZeroDivisionError</code></pre>


<h2 id="linked-lists">Linked Lists</h2>


<p>A linked list is either an empty linked list (<code>Link.empty</code>) <strong>or</strong> a first value
and the rest of the linked list.</p>

<pre><code>class Link:
    &quot;&quot;&quot;
    &gt;&gt;&gt; s = Link(1, Link(2, Link(3)))
    &gt;&gt;&gt; s
    Link(1, Link(2, Link(3)))
    &quot;&quot;&quot;
    empty = ()

    def __init__(self, first, rest=empty):
        assert rest is Link.empty or isinstance(rest, Link)
        self.first = first
        self.rest = rest

    def __repr__(self):
        if self.rest is not Link.empty:
            rest_str = &#x27;, &#x27; + repr(self.rest)
        else:
            rest_str = &#x27;&#x27;
        return &#x27;Link({0}{1})&#x27;.format(repr(self.first), rest_str)</code></pre>

<p>To check if a <code>Link</code> is empty, compare it against the class attribute
<code>Link.empty</code>. For example, the below function prints out whether or not the link it is handed is empty:</p>

<pre><code>def test_empty(link):
    if link is Link.empty:
        print(&#x27;This linked list is empty!&#x27;)
    else:
        print(&#x27;This linked list is not empty!&#x27;)</code></pre>

<blockquote><p>Note: Linked lists are recursive data structures! A linked list contains the
first element of the list (<code>first</code>) and a reference to another linked list
(<code>rest</code>) which contains the rest of the values in the list.</p></blockquote>

<h3 class="question" id="q2">Question 2: Link to List</h3>

<p>Write a function <code>link_to_list</code> that converts a given <code>Link</code> to a
Python list.</p>

<solution>

<pre><code>def link_to_list(link):
    &quot;&quot;&quot;Takes a Link and returns a Python list with the same elements.

    &gt;&gt;&gt; link = Link(1, Link(2, Link(3, Link(4))))
    &gt;&gt;&gt; link_to_list(link)
    [1, 2, 3, 4]
    &gt;&gt;&gt; link_to_list(Link(88))
    [88]
    &gt;&gt;&gt; link_to_list(Link.empty)
    []
    &quot;&quot;&quot;
<span class="sol-highlight">    # Recursive solution
    if link is Link.empty:
        return []
    return [link.first] + link_to_list(link.rest)

# Iterative solution
def link_to_list(link):
    result = []
    while link is not Link.empty:
        result.append(link.first)
        link = link.rest
    return result</span></code></pre>

</solution>

<p>Use OK to test your code:</p><pre class="pre-copy-block"><code>python3 ok -q link_to_list</code></pre>

<h3 class="question" id="q3">Question 3: Every Other</h3>

<p>Implement <code>every_other</code>, which takes a linked list <code>s</code>. It mutates <code>s</code> such
that all of the odd-indexed elements (using 0-based indexing) are removed from
the list. For example:</p>

<pre><code>&gt;&gt;&gt; s = Link(&#x27;a&#x27;, Link(&#x27;b&#x27;, Link(&#x27;c&#x27;, Link(&#x27;d&#x27;))))
&gt;&gt;&gt; every_other(s)
&gt;&gt;&gt; s
Link(&#x27;a&#x27;, Link(&#x27;c&#x27;))
&gt;&gt;&gt; s.first
&#x27;a&#x27;
&gt;&gt;&gt; s.rest.first
&#x27;c&#x27;
&gt;&gt;&gt; s.rest.rest is Link.empty
True</code></pre>

<p>If <code>s</code> contains fewer than two elements, <code>s</code> remains unchanged.</p>

<blockquote><p><strong>IMPORTANT NOTES:</strong></p>

<ul>
  <li>Do not return anything! <code>every_other</code> should mutate the original list.</li>
  <li>We refer to indexing in the problem statement to make it clear which elements should be removed, but remember that you cannot access elements from a linked list using indices</li>
</ul></blockquote>

<solution>

<pre><code>def every_other(s):
    &quot;&quot;&quot;Mutates a linked list so that all the odd&#x2d;indiced elements are removed
    (using 0&#x2d;based indexing).

    &gt;&gt;&gt; s = Link(1, Link(2, Link(3, Link(4))))
    &gt;&gt;&gt; every_other(s) # removes 2, 4
    &gt;&gt;&gt; s
    Link(1, Link(3))
    &gt;&gt;&gt; odd_length = Link(5, Link(3, Link(1)))
    &gt;&gt;&gt; every_other(odd_length) # removes 3
    &gt;&gt;&gt; odd_length
    Link(5, Link(1))
    &gt;&gt;&gt; two_items = Link(6, Link(7))
    &gt;&gt;&gt; every_other(two_items) # removes 7
    &gt;&gt;&gt; two_items
    Link(6)
    &gt;&gt;&gt; singleton = Link(4)
    &gt;&gt;&gt; every_other(singleton) # doesn&#x27;t remove anything
    &gt;&gt;&gt; singleton
    Link(4)
    &quot;&quot;&quot;
<span class="sol-highlight">    if s is Link.empty or s.rest is Link.empty:
        return
    else:
        s.rest = s.rest.rest
        every_other(s.rest)</span></code></pre>

</solution>

<p>Use OK to test your code:</p><pre class="pre-copy-block"><code>python3 ok -q every_other</code></pre>

<h3 class="question" id="q4">Question 4: Deep Map</h3>

<p>Implement <code>deep_map</code>, which takes a function <code>f</code> and a <code>link</code>. It returns a
<em>new</em> linked list with the same structure as <code>link</code>, but with <code>f</code> applied to any
element within <code>link</code> or any <code>Link</code> instance contained in <code>link</code>.</p>

<p>The <code>deep_map</code> function should recursively apply <code>fn</code> to each of that
<code>Link</code>'s elements rather than to that <code>Link</code> itself.</p>

<p><em>Hint</em>: You may find the built-in <code>isinstance</code> function useful.</p>

<p>The <code>isinstance</code> function returns <code>True</code> if the first argument's type matches the second argument.
For example:</p>

<pre><code>&gt;&gt;&gt; isinstance(&#x27;hello&#x27;, str)
True
&gt;&gt;&gt; isinstance(&#x27;hello&#x27;, int)
False</code></pre>

<solution>

<pre><code>def deep_map(f, link):
    &quot;&quot;&quot;Return a Link with the same structure as link but with fn mapped over
    its elements. If an element is an instance of a linked list, recursively
    apply f inside that linked list as well.

    &gt;&gt;&gt; s = Link(1, Link(Link(2, Link(3)), Link(4)))
    &gt;&gt;&gt; print_link(s)
    &lt;1 &lt;2 3&gt; 4&gt;
    &gt;&gt;&gt; print_link(deep_map(lambda x: x * x, s))
    &lt;1 &lt;4 9&gt; 16&gt;
    &gt;&gt;&gt; print_link(s) # unchanged
    &lt;1 &lt;2 3&gt; 4&gt;
    &gt;&gt;&gt; t = Link(s, Link(Link(Link(5))))
    &gt;&gt;&gt; print_link(t)
    &lt;&lt;1 &lt;2 3&gt; 4&gt; &lt;&lt;5&gt;&gt;&gt;
    &gt;&gt;&gt; print_link(deep_map(lambda x: 2 * x, t))
    &lt;&lt;2 &lt;4 6&gt; 8&gt; &lt;&lt;10&gt;&gt;&gt;
    &quot;&quot;&quot;
<span class="sol-highlight">    if link is Link.empty:
        return link
    if isinstance(link.first, Link):
        first = deep_map(f, link.first)
    else:
        first = f(link.first)
    return Link(first, deep_map(f, link.rest))</span></code></pre>

</solution>

<p>Use OK to test your code:</p><pre class="pre-copy-block"><code>python3 ok -q deep_map</code></pre>


  </div>

  <div class='col-md-3'>
    <nav class='hidden-print hidden-sm hidden-xs sidebar'>
      <ul>
  <li><a href="#inheritance">Inheritance</a></li>
  <ul>
  <li><a href="#q1">Question 1: Errors</a></li>
</ul>

  <li><a href="#linked-lists">Linked Lists</a></li>
  <ul>
  <li><a href="#q2">Question 2: Link to List</a></li>
  <li><a href="#q3">Question 3: Every Other</a></li>
  <li><a href="#q4">Question 4: Deep Map</a></li>
</ul>

</ul>

    </nav>
  </div>

</div>
    </div>

    <script src="//cdn.jsdelivr.net/jquery/2.1.3/jquery.min.js"></script>
    <script src="/sp24/assets/js/bootstrap.min.js"></script>
    <!-- TODO: Move to specific pages... -->
    <script src="/sp24/assets/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script>
  $('.sidebar ul').addClass('nav nav-stacked');
  $('body').scrollspy({
    target: '.sidebar',
    offset: 40
  });
</script>

  </body>
</html>
