<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="viewport" content="width=device-width">

    <meta name="description" content ="C88C: Computational Structures in Data Science" />
    <meta name="keywords" content ="CS88, C88C, Computer Science, Data Science, Programming, Berkeley, EECS, Python, intro CS, comp sci" />
    <meta name="author" content ="Michael Ball, Ethan Yoo, Rebecca Dang, Michelle Chen, Ramya Chitturi, John Teng, Karim El-Refai, Liliana Gonzalez, Angela Bi, Sean Yang, Christy Quang, Morgan Dehdashti, Miha Bhaskaran, Satleen Gill, Richik Pal, Meng-Han Wu, Nicholas Chae" />

    <link rel="stylesheet" href="/sp24/assets/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="/sp24/assets/css/style.css">
    <link rel="icon" href="/sp24/assets/images/favicon.ico">
    <link rel="stylesheet" href="/sp24/assets/css/mono-blue.css">

    <link rel="stylesheet" type="text/css" href="/sp24/assets/css/resource.css" />
<link href="/sp24/assets/css/project.css" rel="stylesheet" type="text/css">

    <title>Project 2: Ants Vs. SomeBees | C88C Spring 2024</title>

  </head>

  <body id="index" class="home">
    <nav class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse-section" aria-label="Toggle Nav Menu" aria-expanded="false">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/sp24/">C88C</a>
        </div>

        <div class="collapse navbar-collapse" id="navbar-collapse-section">
          <ul class="nav navbar-nav navbar-right">
            <li><a href="/sp24/">Calendar</a></li>
            <li><a href="/sp24/articles/resources.html">Resources</a></li>
            <li><a href="/sp24/weekly-schedule.html">Google Calendar</a></li>
            <li><a href="/sp24/articles/about.html">Syllabus</a></li>
            <li><a href="https://edstem.org/us/courses/51226/discussion/" target="_blank">Ed</a></li>
            <li><a href="/sp24/staff.html">Staff</a></li>
            <li><a href="https://oh.c88c.org/" target="_blank">OH Queue</a></li>
            <li><a href="https://tutor.cs61a.org/" target="_blank">Python Tutor</a></li>
            <li><a href="https://bcourses.berkeley.edu/courses/1531774/external_tools/90481" target="_blank">Recordings</a></li>
          </ul>
        </div>
      </div>
    </nav>

    

    <div id="content" class="container">
      <div class='row'>
  <div class='col-md-9'>
    <div class='page-header'>
      <div class="row row-no-gutters">
    <div class="col-md-8">
        <h1 class="content-title-brand" style="padding-top: 0;">
            Project 2: Ants Vs. SomeBees
            <br>
            <small><i>Due at 11:59:59 pm on 04/24/2024.</i></small>
        </h1>
    </div>
    <div class="col-md-4">
        <a class="h1 btn btn-lg" href="ants.zip">ants.zip</a>
    </div>
</div>
    </div>

    <div id="haiku">
  

<p><img class="img-responsive center-block" src="assets/splash.png" alt="Ants vs. Somebees"></p>

<blockquote><cite>
  The bees are coming!<br>
  Create a better soldier<br>
  With inherit-ants.
</cite></blockquote>

</div>

    <h2>Introduction</h2>

<blockquote><p><strong>Important submission note</strong>: For full credit,</p>

<ul>
  <li>Submit with Phase 1 and 2 complete by <strong>Wednesday, April 17</strong> (worth 4 pts).</li>
  <li>Submit with all phases complete by <strong>Wednesday, April 24</strong>.
  You can get 2 EC points by submitting the entire project by
  <strong>Monday, April 22</strong>.</li>
</ul>

<p>Try to attempt the problems in order, as some later problems will depend
on earlier problems in their implementation and therefore also when
running <code>ok</code> tests.</p>

<p>The entire project can be completed with a partner. Consider using Visual Studio Code <a href="https://code.visualstudio.com/learn/collaboration/live-share">Live Share</a> to synchronously work on code with your partner.</p></blockquote>

<p>In this project, you will create a <a href="https://secure.wikimedia.org/wikipedia/en/wiki/Tower_defense">tower defense</a> game called Ants Vs.
SomeBees. As the ant queen, you populate your colony with the bravest ants you
can muster. Your ants must protect their queen from the evil bees that invade
your territory. Irritate the bees enough by throwing leaves at them, and they
will be vanquished. Fail to pester the airborne intruders adequately, and your
queen will succumb to the bees' wrath.  This game is inspired by PopCap Games'
<a href="https://www.ea.com/studios/popcap/plants-vs-zombies">Plants Vs. Zombies</a>.</p>

<p>This project uses an object-oriented programming paradigm,
focusing on material from <a href="http://composingprograms.com/pages/25-object-oriented-programming.html">Chapter 2.5</a> of Composing Programs. The
project also involves understanding, extending, and testing a large program.</p>


<h2 id="download-starter-files">Download starter files</h2>


<p>The <a href="ants.zip">ants.zip</a> archive contains several files, but all of your
changes will be made to <code>ants.py</code>.</p>

<ul>
  <li><code>ants.py</code>: The game logic of Ants Vs. SomeBees</li>
  <li><code>ants_gui.py</code>: The original GUI for Ants Vs. SomeBees</li>
  <li><code>gui.py:</code> A new GUI for Ants Vs. SomeBees.</li>
  <li><code>graphics.py</code>: Utilities for displaying simple two-dimensional animations</li>
  <li><code>utils.py</code>: Some functions to facilitate the game interface</li>
  <li><code>ucb.py</code>: Utility functions for CS 88</li>
  <li><code>state.py</code>: Abstraction for gamestate for gui.py</li>
  <li><code>assets</code>: A directory of images and files used by <code>gui.py</code></li>
  <li><code>img</code>: A directory of images used by <code>ants_gui.py</code></li>
  <li><code>ok</code>: The autograder</li>
  <li><code>ants.ok</code>: The <code>ok</code> configuration file</li>
  <li><code>tests</code>: A directory of tests used by <code>ok</code></li>
</ul>


<p>You can obtain all the files needed for this project by downloading this <a href="ants.zip">zip archive</a>.</p>

<h2>Logistics</h2>

<p>This is a 16 day project. You may work with one other
partner.  You should not share your code with students who are not your
partner or copy from anyone else's solutions.</p>

<p>In the end, you will submit one project for both partners. The
project is worth 60 points.</p>



<blockquote><p>The project is worth 60 points.
54 points are assigned for correctness,
2 points for composition,
4 points for submitting Phase 1 and 2 by the checkpoint date</p></blockquote>

<p>For composition we're looking at the <em>style</em> of your code. Please read <a href="https://c88c.org/sp24/articles/composition.html">this</a> to see what we're looking for.</p>

<p>Additionally, there are some extra credit point opportunities.
You can get 2 EC point for submitting the entire project by
<strong>Monday, April 22</strong> and
2 EC points for submitting the extra credit problem.</p>

<blockquote><p><strong>Important:</strong>
In order to receive all of the extra credit points for Ants,
your implementation of the entire project,
including the EC problem,
must be submitted by the early submission deadline.</p></blockquote>


<p>You will turn in the following files:</p>


<ul>
  <li><code>ants.py</code></li>
</ul>


<p>You do not need to modify or turn in any other files to complete the
project. To submit the project, submit to Gradescope using the links below.</p>

<p>For the functions that we ask you to complete, there may be some
initial code that we provide. If you would rather not use that code,
feel free to delete it and start from scratch. You may also add new
function definitions as you see fit.</p>

<p>However, please do <b>not</b> modify any other functions.  Doing so may
result in your code failing our autograder tests. Also, please do not
change any function signatures (names, argument order, or number of
arguments).</p>

<h3>Submission</h3>



<p>In the end, you will submit one project for both partners.</p>

<p>Make sure you have added your partner on Gradescope when submitting the project.</p>

<p><strong>The assignment is due on Wednesday, 04/24, at 11:59pm. We will have a mid-project checkpoint due Wednesday, 04/17 at 11:59pm.</strong></p>

<ul>
  <li>Phases 1 and 2 are due on Wednesday, 04/17, at 11:59pm. To submit, attach the required files to Gradescope under "Ants Checkpoint".</li>
  <li>The entire project (including Phases 1 and 2) is due on Wednesday, 04/24, at 11:59pm. We will only grade your last submission before the deadline. If you submit the entire project 2 days early (by Monday 04/22, at 11:59 pm), you will receive <strong>2 points of EC</strong>.</li>
</ul>

<p>The submission links are below:</p>

<ul>
  <li><a href="https://www.gradescope.com/courses/693229/assignments/3858553/">Gradescope: Ants Checkpoint</a></li>
  <li><a href="https://www.gradescope.com/courses/693229/assignments/3858562/">Gradescope: Ants Project (Main Submission)</a></li>
</ul>

<p><strong>Adding Group Members: After you submit, </strong>you must add your partner to your Gradescope submission.<em></em> <a href="https://help.gradescope.com/article/m5qz2xsnjy-student-add-group-members">Review Gradescope's instructions on adding partners</a>.</p>



<h2>Test Unlocking, Debugging & Getting Unstuck</h2>

<p>Throughout this project, you should be testing the correctness of your
code. It is good practice to test often, so that it is easy to isolate
any problems.</p>

<p>We have provided an <b>autograder</b> called <code>ok</code> to help you with
testing your code and tracking your progress.</p>
The first time you run
the autograder, you will be asked to <b>log in with your OK account using your web browser</b>. Please do so. Each time you run
<code>ok</code>, it will back up your work and progress on our
servers.</p>

<p>The primary purpose of <code>ok</code> is to test your implementations, but there
is a catch. At first, the test cases are <i>locked</i>. To unlock tests, you must run
an <code>ok</code> command which will be specified for each problem below.</p>

<p>The command will start an interactive prompt that looks like:</p>

<pre>
=====================================================================
Assignment: Ants Vs. SomeBees
OK, version ...
=====================================================================

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Unlocking tests

At each "? ", type what you would expect the output to be.
Type exit() to quit

---------------------------------------------------------------------
Question 0 &gt; Suite 1 &gt; Case 1
(cases remaining: 1)

&gt;&gt;&gt; Code here
?
</pre>

<p>At the <code>?</code>, you can type what you expect the output to be.
If you are correct, then this test case will be available the next time
you run the autograder.</p>

<p>The idea is to understand <i>conceptually</i> what your program should do
first, before you start writing any code.</p>

<p>Once you have unlocked some tests and written some code, you can check
the correctness of your program using the tests that you have
unlocked using a different <code>ok</code> command (also provided in each problem below).</p>

<p>The <code>tests</code> folder is used to store autograder tests, so make sure
<b>not to modify it</b>. You may lose all your unlocking progress if you
do. If you need to get a fresh copy, you can download the
<a href="ants.zip">zip archive</a> and copy it over, but you
will need to start unlocking from scratch.</p>


<h3>Debugging Tools</h3>
<p>If you are ever stuck on a problem, you should add print statements to your code to help debug.
Use <code>print("DEBUG:", variable)</code> to see the value of variable and still have your tests pass.

<pre>
print("DEBUG:", variable)
</pre>

When you use a print statement like this, the ok autograder will ignore this output allowing your test to pass.
</p>

<h4>Interactive Debugging</h4>
<p>We can run Python using the interactive interpreter by executing <code>python3 -i</code>. This gives us a <em>console</em> which allows us to inspect and execute code. ok includes similar functionality!

<pre>
python3 ok -q 01 -i
</pre>

This will run our ok tests, then whenever a test fails drop us in the interpreter, for that question. We can then input the datat uses in doctests and call our function.




<h2 id="the-game">The Game</h2>


<p>A game of Ants Vs. SomeBees consists of a series of turns. In each turn, new
bees may enter the ant colony. Then, new ants are placed to defend their colony.
Finally, all insects (ants, then bees) take individual actions. Bees either try
to move toward the end of the tunnel or sting ants in their way. Ants perform a
different action depending on their type, such as collecting more food or
throwing leaves at the bees. The game ends either when a bee reaches the end of
the tunnel (you lose), the bees destroy the <code>QueenAnt</code> if it exists (you lose),
or the entire bee fleet has been vanquished (you win).</p>

<center>
  <img class="img-responsive center-block" src="img/gui_explanation.png" style="border: 1px solid #000;"/>
</center>


<h3 id="core-concepts">Core concepts</h3>


<p><strong>The Colony</strong>. This is where the game takes place. The colony consists of
several <code>Place</code>s that are chained together to form a tunnel where bees can
travel through. The colony also has some quantity of food which can be expended
in order to place an ant in a tunnel.</p>

<p><strong>Places</strong>. A place links to another place to form a tunnel. The player can
put a single ant into each place. However, there can be many bees in a single
place.</p>

<p><strong>The Hive</strong>. This is the place where bees originate. Bees exit the beehive to
enter the ant colony.</p>

<p><strong>Ants</strong>. Players place an ant into the colony by selecting from the
available ant types at the top of the screen.
Each type of ant takes a different action and requires a different
amount of colony food to place. The two most basic ant types are the <code>HarvesterAnt</code>,
which adds one food to the colony during each turn, and the <code>ThrowerAnt</code>, which
throws a leaf at a bee each turn. You will be implementing many more!</p>

<p><strong>Bees</strong>. In this game, bees are the antagonistic forces that the player must
defend the ant colony from. Each turn, a bee either advances to the next place in
the tunnel if no ant is in its way, or it stings the ant in its way. Bees win
when at least one bee reaches the end of a tunnel.</p>


<h3 id="core-classes">Core classes</h3>


<p>The concepts described above each have a corresponding class that encapsulates
the logic for that concept. Here is a summary of the main classes involved in
this game:</p>

<ul>
  <li><strong><code>GameState</code></strong>: Represents the colony and some state information about the game,
  including how much food is available, how much time has elapsed, where the
  <code>AntHomeBase</code> is, and all the <code>Place</code>s in the game.</li>
  <li><strong><code>Place</code></strong>: Represents a single place that holds insects. At most one <code>Ant</code> can
  be in a single place, but there can be many <code>Bee</code>s in a single place. <code>Place</code> objects have an
  <code>exit</code> to the left and an <code>entrance</code> to the right, which are also places.
  Bees travel through a tunnel by moving to a <code>Place</code>'s <code>exit</code>.</li>
  <li><strong><code>Hive</code></strong>: Represents the place where <code>Bee</code>s start out (on the right of the tunnel).</li>
  <li><strong><code>AntHomeBase</code></strong>: Represents the place <code>Ant</code>s are defending (on the left of the tunnel). If Bees get here, they win :(</li>
  <li><strong><code>Insect</code></strong>: A superclass for <code>Ant</code> and <code>Bee</code>. All insects have <code>health</code>
  attribute, representing their remaining health, and a <code>place</code> attribute, representing the <code>Place</code> where
  they are currently located. Each turn, every active <code>Insect</code> in the game
  performs its <code>action</code>.</li>
  <li><strong><code>Ant</code></strong>: Represents ants. Each <code>Ant</code> subclass has special attributes or a
  special <code>action</code> that distinguish it from other <code>Ant</code> types. For example, a
  <code>HarvesterAnt</code> gets food for the colony and a <code>ThrowerAnt</code> attacks <code>Bee</code>s.
  Each ant type also has a <code>food_cost</code> attribute that indicates how much it
  costs to deploy one unit of that type of ant.</li>
  <li><strong><code>Bee</code></strong>: Represents bees. Each turn, a bee either moves to the <code>exit</code> of its
  current <code>Place</code> if the <code>Place</code> is not <code>blocked</code> by an ant, or stings the ant occupying its same <code>Place</code>.</li>
</ul>


<h3 id="game-layout">Game Layout</h3>


<p>Below is a visualization of a GameState. As you work through the unlocking tests and problems, we recommend drawing out similar diagrams to help your understanding.</p>

<img class="img-responsive center-block" src="assets/colony-drawing.png" />


<h3 id="object-map">Object map</h3>


<p>To help visualize how all the classes fit together, we've also created an object map
for you to reference as you work, which you can find <a href="assets/ants_diagram.pdf">here</a>:</p>

<iframe id="antsdiagram" src="assets/ants_diagram.pdf" width="100%" height="500px"></iframe>


<h3 id="playing-the-game">Playing the game</h3>


<p>The game can be run in two modes: as a text-based game or using a
graphical user interface (GUI). The game logic is the same in either
case, but the GUI enforces a turn time limit that makes playing the
game more exciting. The text-based interface is provided for debugging
and development.</p>

<p>The files are separated according to these two modes.  <code>ants.py</code> knows
nothing of graphics or turn time limits.</p>

<p>To start a text-based game, run</p>

<pre><code>python3 ants_text.py</code></pre>

<p>To start a graphical game, run</p>

<pre><code>python3 gui.py</code></pre>

<p>When you start the graphical version, a new browser window should appear. In the
starter implementation, you have unlimited food and your ants can only throw leaves
at bees in their current <code>Place</code>. Before you complete Problem 2, the GUI may crash since it doesn't have a full conception of what a Place is yet! Try playing the game anyway! You'll need to
place a lot of <code>ThrowerAnt</code>s (the second type) in order to keep the bees from
reaching your queen.</p>

<p>The game has several options that you will use throughout the project,
which you can view with <code>python3 ants_text.py &#x2d;&#x2d;help</code>.</p>

<pre><code>usage: ants_text.py [&#x2d;h] [&#x2d;d DIFFICULTY] [&#x2d;w] [&#x2d;&#x2d;food FOOD]

Play Ants vs. SomeBees

optional arguments:
  &#x2d;h, &#x2d;&#x2d;help     show this help message and exit
  &#x2d;d DIFFICULTY  sets difficulty of game (test/easy/normal/hard/extra&#x2d;hard)
  &#x2d;w, &#x2d;&#x2d;water    loads a full layout with water
  &#x2d;&#x2d;food FOOD    number of food to start with when testing</code></pre>


<h2 id="getting-started-videos">Getting Started Videos</h2>


<p>These videos may provide some helpful direction for tackling the coding
problems on the project. Note that these videos start providing help at Q4. You can watch the videos provided <a href="https://www.youtube.com/watch?v=QrWrKAuxSy8&list=PLx38hZJ5RLZdWOZuRdQp7pcbswC4DT3pA&index=1">here</a>.</p>

<blockquote><p>To see these videos, you should be logged into your berkeley.edu email.</p></blockquote>


<h2 id="phase-1-basic-gameplay">Phase 1: Basic gameplay</h2>


<blockquote><p><strong>Important submission note</strong>:
For full credit,
submit with Phase 1 and 2 complete by <strong>Wednesday, April 17</strong> (worth 4 pts).</p></blockquote>

<p>In the first phase you will complete the implementation that will allow for
basic gameplay with the two basic <code>Ant</code>s: the <code>HarvesterAnt</code> and the
<code>ThrowerAnt</code>.</p>


<h3 id="problem-0-0-pt">Problem 0 (0 pt)</h3>


<p>Answer the following questions with your partner after you have read the
<em>entire</em> <code>ants.py</code> file.</p>

<p>To submit your answers, run:</p>

<pre><code>python3 ok &#x2d;q 00 &#x2d;u</code></pre>

<p>If you get stuck while answering these questions, you can try reading through <code>ants.py</code>
again, consult the <a href="#core-concepts">core concepts</a>/<a href="#core-classes">classes</a> sections above, or ask a question in
the Question 0 thread on EdStem.</p>

<ol>
  <li>What is the significance of an Insect's <code>health</code> attribute? Does this value
  change? If so, how?</li>
  <li>Which of the following is a class attribute of the <code>Insect</code> class?</li>
  <li>Is the <code>health</code> attribute of the <code>Ant</code> class an instance attribute or a class
  attribute? Why?</li>
  <li>Is the <code>damage</code> attribute of an <code>Ant</code> subclass (such as <code>ThrowerAnt</code>) an instance attribute or class attribute? Why?</li>
  <li>Which class do both <code>Ant</code> and <code>Bee</code> inherit from?</li>
  <li>What do instances of <code>Ant</code> and instances of <code>Bee</code> have in common?</li>
  <li>How many insects can be in a single <code>Place</code> at any given time (before Problem 8)?</li>
  <li>What does a <code>Bee</code> do during one of its turns?</li>
  <li>When is the game lost?</li>
</ol>

<p>Remember to run:</p>

<pre><code>python3 ok &#x2d;q 00 &#x2d;u</code></pre>


<h3 id="problem-1-3-pt">Problem 1 (3 pt)</h3>


<p>Before writing any code, read the instructions and test your understanding of the problem:</p>

<pre><code>python3 ok &#x2d;q 01 &#x2d;u</code></pre>

<p><strong>Part A</strong>: Currently, there is no cost
for placing any type of <code>Ant</code>, and so there is no challenge to the
game. The base class <code>Ant</code> has a <code>food_cost</code> of
zero. Override this class attribute for <code>HarvesterAnt</code> and <code>ThrowerAnt</code>
according to the "Food Cost" column in the table below.</p>

<table class="ant">
  <tr>
    <td><b>Class</b></td>
    <td><b>Food Cost</b></td>
    <td><b>Initial Health</b></td>
  </tr>
  <tr>
    <td><img class="img-responsive center-block" src="assets/insects/ant_harvester.gif" /> <br> <code>HarvesterAnt</code></td>
    <td>2</td>
    <td>1</td>
  </tr>
  <tr>
    <td><img class="img-responsive center-block" src="assets/insects/ant_thrower.gif" /> <br> <code>ThrowerAnt</code></td>
    <td>3</td>
    <td>1</td>
  </td>
</table>

<p><strong>Part B</strong>: Now that placing an <code>Ant</code> costs food, we need to be able to gather more food!
To fix this issue, implement the <code>HarvesterAnt</code> class. A <code>HarvesterAnt</code> is a
type of <code>Ant</code> that adds one food to the <code>gamestate.food</code> total as its <code>action</code>.</p>

<p>After writing code, test your implementation:</p>

<pre><code>python3 ok &#x2d;q 01</code></pre>

<p>Try playing the game by running <code>python3 gui.py</code>. Once you have placed a
<code>HarvesterAnt</code>, you should accumulate food each turn. You can also place
<code>ThrowerAnt</code>s, but you'll see that they can only attack bees that are in their
<code>Place</code>, making it a little difficult to win.</p>

<!--
<alwaystoggle prompt="Hint Video">
<br>
<video-embed ants-problem1>
</alwaystoggle>
-->


<h3 id="problem-2-3-pt">Problem 2 (3 pt)</h3>


<p>Before writing any code, read the instructions and test your understanding of the problem:</p>

<pre><code>python3 ok &#x2d;q 02 &#x2d;u</code></pre>

<p>In this problem, you'll complete <code>Place.__init__</code> by adding code that tracks entrances. Right
now, a <code>Place</code> keeps track only of its <code>exit</code>. We would like a <code>Place</code> to keep
track of its entrance as well. A <code>Place</code> needs to track only one <code>entrance</code>.
Tracking entrances will be useful when an <code>Ant</code> needs to see what <code>Bee</code>s are in
front of it in the tunnel.</p>

<p>However, simply passing an entrance to a <code>Place</code> constructor will be
problematic; we would need to have both the exit and the entrance before
creating a <code>Place</code>! (It's a <a href="https://en.wikipedia.org/wiki/Chicken_or_the_egg">chicken or the
egg</a>
problem.) To get around this problem, we will keep track of entrances in the
following way instead. <code>Place.__init__</code> should use this logic:</p>

<ul>
  <li>A newly created <code>Place</code> always starts with its <code>entrance</code> as <code>None</code>.</li>
  <li>If the <code>Place</code> has an <code>exit</code>, then the <code>exit</code>'s <code>entrance</code> is set to
  that <code>Place</code>.</li>
</ul>

<blockquote><p><em>Hint:</em> Remember that when the <code>__init__</code> method is called, the first parameter,
<code>self</code>, is bound to the newly created object</p></blockquote>

<!-- hack for separate blockquotes -->

<blockquote><p><em>Hint:</em> Try drawing out two <code>Place</code>s next to each other if things get confusing.
In the GUI, a place's <code>entrance</code> is to its right while the <code>exit</code> is to its left.</p></blockquote>

<!-- hack for separate blockquotes -->

<blockquote><p><em>Hint:</em> Remember that <code>Places</code> are not stored in a list, so you can't index into anything to access them. This means that you <strong>can't</strong> do something like <code>colony[index + 1]</code> to access an adjacent <code>Place</code>. How <em>can</em> you move from one place to another?</p></blockquote>

<img class="img-responsive center-block" src="assets/colony-drawing.png" />

<p>After writing code, test your implementation:</p>

<pre><code>python3 ok &#x2d;q 02</code></pre>

<!--
<alwaystoggle prompt="Hint Video">
<br>
<video-embed ants-problem2>
</alwaystoggle>
-->


<h3 id="problem-3-3-pt">Problem 3 (3 pt)</h3>


<p>Before writing any code, read the instructions and test your understanding of the problem:</p>

<pre><code>python3 ok &#x2d;q 03 &#x2d;u</code></pre>

<p>In order for a <code>ThrowerAnt</code> to throw a leaf, it must know which bee to hit.
The provided implementation of the <code>nearest_bee</code> method in the <code>ThrowerAnt</code>
class only allows them to hit bees in the same <code>Place</code>. Your job is to fix it
so that a <code>ThrowerAnt</code> will <code>throw_at</code> the nearest bee in front of it <strong>that is not still in the <code>Hive</code>.</strong>
This includes bees that are in the same <code>Place</code> as a <code>ThrowerAnt</code></p>

<blockquote><p><em>Hint:</em> All <code>Place</code>s have an <code>is_hive</code> attribute which is <code>True</code> when that
place is the <code>Hive</code>.</p></blockquote>

<p>Change <code>nearest_bee</code> so that it returns a random <code>Bee</code> from the nearest place that
contains bees. Your implementation should follow this logic:</p>

<ul>
  <li>Start from the current <code>Place</code> of the <code>ThrowerAnt</code>.</li>
  <li>For each place, return a random bee if there is any, and if not,
  inspect the place in front of it (stored as the current place's <code>entrance</code>).</li>
  <li>If there is no bee to attack, return <code>None</code>.</li>
</ul>

<blockquote><p><em>Hint</em>: The <code>random_bee</code> function provided in <code>ants.py</code> returns a random
bee from a list of bees or <code>None</code> if the list is empty.</p></blockquote>

<!-- hack for separate blockquotes -->

<blockquote><p><em>Hint</em>: As a reminder, if there are no bees present at a <code>Place</code>,
then the <code>bees</code> attribute of that <code>Place</code> instance will be an empty list.</p></blockquote>

<!-- hack for separate blockquotes -->

<blockquote><p><em>Hint</em>: Having trouble visualizing the test cases?
Try drawing them out on paper!
The sample diagram provided in <a href="#game-layout">Game Layout</a> shows the first test case for this problem.</p></blockquote>

<p>After writing code, test your implementation:</p>

<pre><code>python3 ok &#x2d;q 03</code></pre>

<!--
<alwaystoggle prompt="Hint Video">
<br>
<video-embed ants-problem3>
</alwaystoggle>
-->

<p>After implementing <code>nearest_bee</code>, a <code>ThrowerAnt</code> should be able to <code>throw_at</code> a
<code>Bee</code> in front of it that is not still in the <code>Hive</code>.  Make sure that your ants
do the right thing! To start a game with ten food (for easy testing):</p>

<pre><code>python3 gui.py &#x2d;&#x2d;food 10</code></pre>


<h2 id="phase-2-ants">Phase 2: Ants!</h2>


<blockquote><p><strong>Important submission note</strong>: For full credit,</p>

<ul>
  <li>Submit with Phase 1 and 2 complete by <strong>Wednesday, April 17</strong> (worth 4 pts).</li>
</ul></blockquote>

<p>Now that you've implemented basic gameplay with two types of <code>Ant</code>s, let's
add some flavor to the ways ants can attack bees. In this phase, you'll be
implementing several different <code>Ant</code>s with different attack strategies.</p>

<p>After you implement each <code>Ant</code> subclass in this section, you'll need to set its
<code>is_implemented</code> class attribute to <code>True</code> so that that type of ant will show up in the
GUI. Feel free to try out the game with each new ant to test the functionality!</p>

<p>With your Phase 2 ants, try <code>python3 gui.py &#x2d;d easy</code> to play against a
full swarm of bees in a multi-tunnel layout and try <code>&#x2d;d normal</code>, <code>&#x2d;d hard</code>, or
<code>&#x2d;d extra&#x2d;hard</code> if you want a real challenge! If the bees are too numerous to
vanquish, you might need to create some new ants.</p>

<!-- ### Phase 2 Hint Videos
<alwaystoggle prompt="Hint Video">
<video-embed ants-phase2>
</alwaystoggle> -->


<h3 id="problem-4-5-pt">Problem 4 (5 pt)</h3>


<p>Before writing any code, read the instructions and test your understanding of the problem:</p>

<pre><code>python3 ok &#x2d;q 04 &#x2d;u</code></pre>

<p>A <code>ThrowerAnt</code> is a powerful threat to the bees, but it has a high food cost.
In this problem, you'll implement two subclasses of <code>ThrowerAnt</code> that are less
costly but have constraints on the distance they can throw:</p>

<ul>
  <li>The <code>LongThrower</code> can only <code>throw_at</code> a <code>Bee</code> that is found after following
  at least 5 <code>entrance</code> transitions. It cannot hit <code>Bee</code>s that are in the same
  <code>Place</code> as it or the first 4 <code>Place</code>s in front of it. If there are two
  <code>Bees</code>, one too close to the <code>LongThrower</code> and the other within its range,
  the <code>LongThrower</code> should only throw at the farther <code>Bee</code>, which is within its range, instead of trying to hit the closer <code>Bee</code>.</li>
  <li>The <code>ShortThrower</code> can only <code>throw_at</code> a <code>Bee</code> that is found after following
  at most 3 <code>entrance</code> transitions. It cannot throw at any bees further than 3
  <code>Place</code>s in front of it.</li>
</ul>

<p>Neither of these specialized throwers can <code>throw_at</code> a <code>Bee</code> that is exactly 4
<code>Place</code>s away.</p>

<table class="ant">
  <tr>
    <td><b>Class</b></td>
    <td><b>Food Cost</b></td>
    <td><b>Initial Health</b></td>
  </tr>
  <tr>
    <td><img class="img-responsive center-block" src="assets/insects/ant_shortthrower.gif" /> <br>
      <code>ShortThrower</code></td>
    <td>2</td>
    <td>1</td>
  </tr>
  <tr>
    <td><img class="img-responsive center-block" src="assets/insects/ant_longthrower.gif" /> <br> <code>LongThrower</code></td>
    <td>2</td>
    <td>1</td>
  </tr>
</table>

<p>To implement these new throwing ants, your <code>ShortThrower</code> and <code>LongThrower</code> classes
should inherit the <code>nearest_bee</code> method from the base <code>ThrowerAnt</code> class.
The logic of choosing which bee a thrower ant will attack is
the same, except the <code>ShortThrower</code> and <code>LongThrower</code> ants have a maximum and
minimum range, respectively.</p>

<p>To do this, modify the <code>nearest_bee</code> method to reference <code>min_range</code> and <code>max_range</code> attributes,
and only return a bee if it is within range.</p>

<p>Make sure to give these <code>min_range</code> and <code>max_range</code> attributes appropriate
values in the <code>ThrowerAnt</code> class so that the behavior of <code>ThrowerAnt</code> is
unchanged. Then, implement the subclasses <code>LongThrower</code> and <code>ShortThrower</code>
with appropriately constrained ranges.</p>

<p>You should <strong>not</strong> need to repeat any code between <code>ThrowerAnt</code>,
<code>ShortThrower</code>, and <code>LongThrower</code>.</p>

<blockquote><p><em>Hint:</em> <code>float(&#x27;inf&#x27;)</code> returns an infinite positive value represented as a
float that can be compared with other numbers.</p></blockquote>

<!-- hack for separate blockquotes -->

<blockquote><p><em>Hint:</em> You can chain inequalities in Python:
e.g. <code>2 &lt; x &lt; 6</code> will check if <code>x</code> is between
2 and 6. Also, <code>min_range</code> and <code>max_range</code> should mark an inclusive range.</p></blockquote>

<!-- hack for separate blockquotes -->

<blockquote><p><strong>Important:</strong>
Make sure your class attributes are called <code>max_range</code> and <code>min_range</code>
The tests directly reference these attribute names, and will error
if you use another name for these attributes.</p></blockquote>

<p>Don't forget to set the <code>is_implemented</code> class attribute of <code>LongThrower</code> and
<code>ShortThrower</code> to <code>True</code>.</p>

<p>After writing code, test your implementation (rerun the tests for q 03 to make sure they still work):</p>

<pre><code>python3 ok &#x2d;q 03
python3 ok &#x2d;q 04</code></pre>

<!--
<alwaystoggle prompt="Hint Video">
<br>
<video-embed ants-problem4>
</alwaystoggle>
-->


<h3 id="problem-5-7-pt">Problem 5 (7 pt)</h3>


<p>Before writing any code, read the instructions and test your understanding of the problem:</p>

<pre><code>python3 ok &#x2d;q 05 &#x2d;u</code></pre>

<p>Implement the <code>FireAnt</code>, which does damage when it receives damage. Specifically,
if it is damaged by <code>amount</code> health units, it does a damage of
<code>amount</code> to all bees in its place (this is called <em>reflected damage</em>).
If it dies, it does an additional amount of damage, as specified by its <code>damage</code> attribute,
which has a default value of <code>3</code> as defined in the <code>FireAnt</code> class.</p>

<p>To implement this, override <code>FireAnt</code>'s <code>reduce_health</code> method.
Your overriden method should call the <code>reduce_health</code> method inherited from
the superclass (<code>Ant</code>) to reduce the current <code>FireAnt</code> instance's health.
Calling the <em>inherited</em> <code>reduce_health</code> method on a <code>FireAnt</code> instance reduces
the insect's <code>health</code> by the given <code>amount</code> and removes the insect from its
place if its <code>health</code> reaches zero or lower.</p>

<blockquote><p><em>Hint:</em>
Do <em>not</em> call <code>self.reduce_health</code>,
or you'll end up stuck in a recursive loop. (Can you see why?)</p></blockquote>

<p>However, your method needs to also include the reflective damage logic:</p>

<ul>
  <li>Determine the reflective damage amount:
  start with the <code>amount</code> inflicted on the ant,
  and then add <code>damage</code> if the ant's health has dropped to 0.</li>
  <li>For each bee in the place, damage them with the total amount by
  calling the appropriate <code>reduce_health</code> method for each bee.</li>
</ul>

<blockquote><p><strong>Important:</strong>
The <code>FireAnt</code> must do its damage <em>before</em> being removed from its <code>place</code>,
so pay careful attention to the order of your logic in <code>reduce_health</code>.</p></blockquote>

<table class="ant">
  <tr>
    <td><b>Class</b></td>
    <td><b>Food Cost</b></td>
    <td><b>Initial Health</b></td>
  </tr>
  <tr>
    <td><img class="img-responsive center-block" src="assets/insects/ant_fire.gif" /> <br> <code>FireAnt</code></td>
    <td>5</td>
    <td>3</td>
  </td>
</table>

<blockquote><p><em>Hint:</em> Damaging a bee may cause it to be removed from its place. If you
iterate over a list, but change the contents of that list at the same time,
you <a href="https://docs.python.org/3/tutorial/controlflow.html#for-statements">may not visit all the elements</a>.
This can be prevented by making a copy of the list.
You can either use a list slice, or use the built-in <code>list</code> function.</p>

<pre><code> &gt;&gt;&gt; lst = [1,2,3,4]
 &gt;&gt;&gt; lst[:]
 [1, 2, 3, 4]
 &gt;&gt;&gt; list(lst)
 [1, 2, 3, 4]
 &gt;&gt;&gt; lst[:] is not lst and list(lst) is not lst
 True</code></pre></blockquote>

<p>Once you've finished implementing the <code>FireAnt</code>, give it a class attribute
<code>is_implemented</code> with the value <code>True</code>.</p>

<blockquote><p><em>Note:</em>
Even though you are overriding the superclass's <code>reduce_health</code> function
(<code>Ant.reduce_health</code>),
you can still use this method in your implementation by calling it.
Note this is not recursion. (Why not?)</p></blockquote>

<p>After writing code, test your implementation:</p>

<pre><code>python3 ok &#x2d;q 05</code></pre>

<!--
<alwaystoggle prompt="Hint Video">
<br>
<video-embed ants-problem5>
</alwaystoggle>
-->

<p>You can also test your program by playing a game or two! A <code>FireAnt</code> should
destroy all co-located Bees when it is stung. To start a game with ten food
(for easy testing):</p>

<pre><code>python3 gui.py &#x2d;&#x2d;food 10</code></pre>

<p>You can check to ensure that you have completed all Phase 1 and Phase 2 problems by running:</p>

<pre><code>python3 ok &#x2d;&#x2d;score</code></pre>

<p>Make sure to submit by the checkpoint deadline <strong>Wednesday, April 17</strong> by submitting on Gradescope. If you worked with a partner don't forget to add them!</p>

<p>Congratulations! You have finished Phase 1 and Phase 2 of this project!</p>


<h2 id="phase-3-more-ants">Phase 3: More Ants!</h2>


<blockquote><p><strong>Important submission note</strong>: For full credit,</p>

<ul>
  <li>Submit with Phase 1 and 2 complete by <strong>Wednesday, April 17</strong> (worth 4 pts).</li>
  <li>Submit with all phases complete by <strong>Wednesday, April 24</strong>.</li>
</ul></blockquote>

<!--
<alwaystoggle prompt="Hint Video">
<video-embed antsphase3>
</alwaystoggle>
-->


<h3 id="problem-6-3-pt">Problem 6 (3 pt)</h3>


<p>Before writing any code, read the instructions and test your understanding of the problem:</p>

<pre><code>python3 ok &#x2d;q 06 &#x2d;u</code></pre>

<p>We are going to add some protection to our glorious home base by implementing
the <code>WallAnt</code>, an ant that does nothing each turn. A <code>WallAnt</code> is
useful because it has a large <code>health</code> value.</p>

<table class="ant">
  <tr>
    <td><b>Class</b></td>
    <td><b>Food Cost</b></td>
    <td><b>Initial Health</b></td>
  </tr>
  <tr>
    <td><img class="img-responsive center-block" src="assets/insects/ant_wall.gif" /> <br> <code>WallAnt</code></td>
    <td>4</td>
    <td>4</td>
  </td>
</table>

<p>Unlike with previous ants, we have not provided you with a class header.
Implement the <code>WallAnt</code> class from scratch. Give it a class attribute <code>name</code>
with the value <code>&#x27;Wall&#x27;</code> (so that the graphics work) and a class attribute
<code>is_implemented</code> with the value <code>True</code> (so that you can use it in a game).</p>

<blockquote><p><em>Hint</em>: To start, take a look at how the previous problems' ants were implemented!</p></blockquote>

<p>After writing code, test your implementation:</p>

<pre><code>python3 ok &#x2d;q 06</code></pre>


<h3 id="problem-7-7-pt">Problem 7 (7 pt)</h3>


<p>Implement the <code>HungryAnt</code>, which will select a random <code>Bee</code> from its <code>place</code>
and eat it whole. After eating a <code>Bee</code>, a <code>HungryAnt</code> must spend 3 turns chewing before
eating again. If there is no bee available to eat, <code>HungryAnt</code> will do nothing.</p>

<p>Before writing any code, read the instructions and test your understanding of the problem:</p>

<pre><code>python3 ok &#x2d;q 07 &#x2d;u</code></pre>

<p>We have not provided you with a class header.
Implement the <code>HungryAnt</code> class from scratch. Give it a class attribute <code>name</code>
with the value <code>&#x27;Hungry&#x27;</code> (so that the graphics work) and a class attribute
<code>is_implemented</code> with the value <code>True</code> (so that you can use it in a game).</p>

<blockquote><p><em>Hint:</em>
When a <code>Bee</code> is eaten, it should lose all its health.
Is there an existing function we can call on a <code>Bee</code> that can
reduce its health to 0?</p></blockquote>

<table class="ant">
  <tr>
    <td><b>Class</b></td>
    <td><b>Food Cost</b></td>
    <td><b>Initial Health</b></td>
  </tr>
  <tr>
    <td><img class="img-responsive center-block" src="assets/insects/ant_hungry.gif" /> <br> <code>HungryAnt</code></td>
    <td>4</td>
    <td>1</td>
  </td>
</table>

<p>Give <code>HungryAnt</code> a <code>chew_duration</code> <strong>class</strong> attribute that stores the number of
turns that it will take a <code>HungryAnt</code> to chew (set to 3). Also, give each
<code>HungryAnt</code> an <strong>instance</strong> attribute <code>chew_countdown</code> that counts the number of turns
it has left to chew (initialized to 0, since it hasn't eaten anything at the
beginning. You can also think of <code>chew_countdown</code> as the number of turns until a
<code>HungryAnt</code> can eat another <code>Bee</code>).</p>

<p>Implement the <code>action</code> method of the <code>HungryAnt</code>: First, check if it is chewing; if
so, decrement its <code>chew_countdown</code> by 1. Otherwise, eat a random <code>Bee</code> in its
<code>place</code> by reducing the <code>Bee</code>'s health to 0. Make sure to set the <code>chew_countdown</code>
when a Bee is eaten!</p>

<blockquote><p><em>Hint</em>: Other than the <code>action</code> method, make sure you implement the <code>__init__</code> method too
so the <code>HungryAnt</code> starts off with the appropriate amount of <code>health</code>!</p></blockquote>

<p>After writing code, test your implementation:</p>

<pre><code>python3 ok &#x2d;q 07</code></pre>

<p>We now have some great offensive troops to help vanquish the bees, but let's
make sure we're also keeping our defensive efforts up. In this phase you will
implement ants that have special defensive capabilities such as increased
health and the ability to protect other ants.</p>


<h3 id="problem-8-7-pt">Problem 8 (7 pt)</h3>


<p>Before writing any code, read the instructions and test your understanding of the problem:</p>

<pre><code>python3 ok &#x2d;q 08 &#x2d;u</code></pre>

<p>Right now, our ants are quite frail. We'd like to provide a way to help them
last longer against the onslaught of the bees. Enter the <code>BodyguardAnt</code>.</p>

<table class="ant">
  <tr>
    <td><b>Class</b></td>
    <td><b>Food Cost</b></td>
    <td><b>Initial Health</b></td>
  </tr>
  <tr>
    <td><img class="img-responsive center-block" src="assets/insects/ant_bodyguard.gif" /> <br> <code>BodyguardAnt</code></td>
    <td>4</td>
    <td>2</td>
  </tr>
</table>

<p>A <code>BodyguardAnt</code> differs from a normal ant because it is a <code>ContainerAnt</code>; it can
contain another ant and protect it, all in one <code>Place</code>. When a <code>Bee</code> stings the
ant in a <code>Place</code> where one ant contains another, only the container is
damaged. The ant inside the container can still perform its original action.
If the container perishes, the contained ant still remains in the place (and
can then be damaged).</p>

<p>Each <code>ContainerAnt</code> has an instance attribute <code>ant_contained</code> that stores the ant it
contains. This ant, <code>ant_contained</code>, initially starts off as <code>None</code> to indicate that there is no ant being
stored yet. Implement the <code>store_ant</code> method so that it sets the <code>ContainerAnt</code>'s
<code>ant_contained</code> instance attribute to the passed in <code>ant</code> argument. Also implement the
<code>ContainerAnt</code>'s <code>action</code> method to perform its <code>ant_contained</code>'s action if it is currently
containing an ant.</p>

<p>In addition, you will need to make the following modifications throughout your
program so that a container and its contained ant can both occupy a place at
the same time (a maximum of two ants per place), but only if exactly one is a
container:</p>

<ol>
  <li><p>There is an <code>Ant.can_contain</code> method, but it always returns <code>False</code>.
  Override the method <code>ContainerAnt.can_contain</code> so that it takes an ant <code>other</code> as an
  argument and returns <code>True</code> if:</p>

  <ul>
    <li>This <code>ContainerAnt</code> does not already contain another ant.</li>
    <li>The other ant is not a container.</li>
  </ul></li>
  <li><p>Modify <code>Ant.add_to</code> to allow a container and a non-container ant
  to occupy the same place according to the following rules:</p>

  <ul>
    <li>If the ant originally occupying a place can contain the ant being added,
    then both ants occupy the place and the original ant contains the ant being added.</li>
    <li>If the ant being added can contain the ant originally in the space, then both ants occupy the place and the
    (container) ant being added contains the original ant.</li>
    <li>If neither <code>Ant</code> can contain the other, raise the same
    <code>AssertionError</code> as before (the one already present in the starter
    code).</li>
    <li><strong>Important:</strong> If there are two ants in a specific <code>Place</code>,
    the <code>ant</code> attribute of the <code>Place</code> instance should refer to the container
    ant, and the container ant should contain the non-container ant.</li>
  </ul></li>
  <li>Add a <code>BodyguardAnt.__init__</code> that sets the initial amount of health for the ant.</li>
</ol>

<blockquote><p><em>Hint</em>:
You may find the <code>is_container</code> attribute that each <code>Ant</code> has useful for
checking if a specific <code>Ant</code> is a container.
You should also take advantage of the <code>can_contain</code> method you wrote
and avoid repeating code.</p></blockquote>

<!-- hack for splitting blockquotes -->

<blockquote><p>The constructor of <code>ContainerAnt.__init__</code> is implemented as follows:</p>

<pre><code>    def __init__(self, *args, **kwargs):
        super().__init__(*args, **kwargs)
        self.ant_contained = None</code></pre>

<p><code>args</code> is bound to all positional arguments
(which are all arguments passed without keywords), and <code>kwargs</code> is bound
to all the keyword arguments.
This ensures that both sets of arguments are passed to the Ant
constructor.</p>

<p>Effectively, this means the constructor is exactly the same as
its parent class's constructor (<code>Ant.__init__</code>)
but here we also set <code>self.ant_contained = None</code>.</p></blockquote>

<!-- hack for splitting blockquotes -->

<blockquote><p><em>Note:</em>
Here we will expand on the syntax used above if you are interested. We would like to write a
function that accepts an arbitrary number of arguments, and then calls another function using exactly those
arguments. Here's how it works.</p>

<p>Instead of listing formal parameters for a function, you can write <em>args, which represents all of the arguments
that get passed into the function. We can then call another function with these same arguments by passing these
</em>args into this other function. For example:</p>

<pre><code>    def printed(f):
    ...     def print_and_return(*args):
    ...         result = f(*args)
    ...         print(&#x27;Result:&#x27;, result)
    ...         return result
    ...     return print_and_return
    &gt;&gt;&gt; printed_pow = printed(pow)
    &gt;&gt;&gt; printed_pow(2, 8)
    Result: 256
    256
    &gt;&gt;&gt; printed_abs = printed(abs)
    &gt;&gt;&gt; printed_abs(&#x2d;10)
    Result: 10
    10</code></pre>

<p>Here, we can pass any number of arguments into <code>print_and_return</code> via the <code>*args</code> syntax.
We can also use <code>*args</code> inside
our <code>print_and_return</code> function to make another function call with the same arguments.</p></blockquote>

<p>Once you've finished implementing the <code>BodyguardAnt</code>,
give it a class attribute <code>is_implemented</code> with the value <code>True</code>.</p>

<p>After writing code, test your implementation:</p>

<pre><code>python3 ok &#x2d;q 08</code></pre>


<h3 id="problem-9-3-pt">Problem 9 (3 pt)</h3>


<p>Before writing any code, read the instructions and test your understanding of the problem:</p>

<pre><code>python3 ok &#x2d;q 09 &#x2d;u</code></pre>

<p>The <code>BodyguardAnt</code> provides great defense, but they say the best defense is a
good offense. The <code>TankAnt</code> is a container ant that protects an ant in its place
and also deals 1 damage to all bees in its place each turn.</p>

<table class="ant">
  <tr>
    <td><b>Class</b></td>
    <td><b>Food Cost</b></td>
    <td><b>Initial Health</b></td>
  </tr>
  <tr>
    <td><img class="img-responsive center-block" src="assets/insects/ant_tank.gif" /> <br> <code>TankAnt</code></td>
    <td>6</td>
    <td>2</td>
  </tr>
</table>

<p>We have not provided you with a class header.
Implement the <code>TankAnt</code> class from scratch. Give it a class attribute <code>name</code>
with the value <code>&#x27;Tank&#x27;</code> (so that the graphics work) and a class attribute
<code>is_implemented</code> with the value <code>True</code> (so that you can use it in a game).</p>

<p>You should not need to modify any code outside of the <code>TankAnt</code> class. If you
find yourself needing to make changes elsewhere, look for a way to write your
code for the previous question such that it applies not just to <code>BodyguardAnt</code>
and <code>TankAnt</code> objects, but to <code>ContainerAnt</code>'s in general.</p>

<blockquote><p><em>Hint</em>: The only methods you need to override from <code>TankAnt</code>'s parent class are <code>__init__</code> and <code>action</code>.</p></blockquote>

<!-- hack for separate blockquotes -->

<blockquote><p><em>Hint</em>: Like with <code>FireAnt</code>, it is possible that damaging a bee will cause it to be removed from its place.</p></blockquote>

<p>After writing code, test your implementation:</p>

<pre><code>python3 ok &#x2d;q 09</code></pre>


<h2 id="phase-4-water-and-might">Phase 4: Water and Might</h2>


<blockquote><p><strong>Important submission note</strong>: For full credit,</p>

<ul>
  <li>Submit with all phases complete by <strong>Wednesday, April 24</strong>.</li>
</ul>

<p>You will get an extra credit point for submitting the entire project by
<strong>Monday, April 22</strong>.</p></blockquote>

<p>In the final phase, you're going to add one last kick to the game by
introducing a new type of place and new ants that are able to occupy this
place. One of these ants is the most important ant of them all: the queen of
the colony!</p>

<!-- ### Phase 4 Hint Videos
<alwaystoggle prompt="Hint Video">
<video-embed ants-phase4>
</alwaystoggle> -->


<h3 id="problem-10-3-pt">Problem 10 (3 pt)</h3>


<p>Before writing any code, read the instructions and test your understanding of the problem:</p>

<pre><code>python3 ok &#x2d;q 10 &#x2d;u</code></pre>

<p>Let's add water to the colony! Currently there are only two types of places, the
<code>Hive</code> and a basic <code>Place</code>. To make things more interesting, we're going to
create a new type of <code>Place</code> called <code>Water</code>.</p>

<p>Only an insect that is waterproof can be placed in <code>Water</code>. In order
to determine whether an <code>Insect</code> is waterproof, add a new class attribute to the
<code>Insect</code> class named <code>is_waterproof</code> that is set to <code>False</code>. Since bees can fly,
set their <code>is_waterproof</code> attribute to <code>True</code>, overriding the inherited value.</p>

<p>Now, implement the <code>add_insect</code> method for <code>Water</code>. First, add the insect to
the place regardless of whether it is waterproof.  Then, if the insect is not
waterproof, reduce the insect's health to 0. <em>Do not repeat code from elsewhere
in the program.</em> Instead, use methods that have already been defined.
<!-- ; this will be checked for composition scores! --></p>

<p>After writing code, test your implementation:</p>

<pre><code>python3 ok &#x2d;q 10</code></pre>

<p>Once you've finished this problem, play a game that includes water. To access
the <code>wet_layout</code>, which includes water, add the <code>&#x2d;&#x2d;water</code> option (or <code>&#x2d;w</code> for
short) when you start the game.</p>

<pre><code>python3 gui.py &#x2d;&#x2d;water</code></pre>


<h3 id="problem-11-3-pt">Problem 11 (3 pt)</h3>


<p>Before writing any code, read the instructions and test your understanding of the problem:</p>

<pre><code>python3 ok &#x2d;q 11 &#x2d;u</code></pre>

<p>Currently there are no ants that can be placed on <code>Water</code>. Implement the
<code>ScubaThrower</code>, which is a subclass of <code>ThrowerAnt</code> that is more costly and
waterproof, <em>but otherwise identical to its base class</em>. A <code>ScubaThrower</code> should
not lose its health when placed in <code>Water</code>.</p>

<table class="ant">
  <tr>
    <td><b>Class</b></td>
    <td><b>Food Cost</b></td>
    <td><b>Initial Health</b></td>
  </tr>
  <tr>
    <td><img class="img-responsive center-block" src="assets/insects/ant_scuba.gif" /> <br> <code>ScubaThrower</code></td>
    <td>6</td>
    <td>1</td>
  </tr>
</table>

<p>We have not provided you with a class header. Implement the <code>ScubaThrower</code>
class from scratch. Give it a class attribute <code>name</code> with the value <code>&#x27;Scuba&#x27;</code>
(so that the graphics work) and remember to set the class attribute
<code>is_implemented</code> with the value <code>True</code> (so that you can use it in a game).</p>

<p>After writing code, test your implementation:</p>

<pre><code>python3 ok &#x2d;q 11</code></pre>


<h3 id="problem-12-7-pt">Problem 12 (7 pt)</h3>


<p>Before writing any code, read the instructions and test your understanding of the problem:</p>

<pre><code>python3 ok &#x2d;q 12 &#x2d;u</code></pre>

<p>Finally, implement the <code>QueenAnt</code>. The queen is a waterproof <code>ScubaThrower</code>
that inspires her fellow ants through her bravery.
In addition to the standard <code>ScubaThrower</code> action, the <code>QueenAnt</code> doubles the
damage of all the ants behind her each time she performs an action. Once an
ant's damage has been doubled, it is <em>not</em> doubled again for subsequent turns.</p>

<blockquote><p>Note: The reflected damage of a <code>FireAnt</code> should not be doubled, only the
extra damage it deals when its health is reduced to 0.</p></blockquote>

<table class="ant">
  <tr>
    <td><b>Class</b></td>
    <td><b>Food Cost</b></td>
    <td><b>Initial Health</b></td>
  </tr>
  <tr>
    <td><img class="img-responsive center-block" src="assets/insects/ant_queen.gif" /> <br> <code>QueenAnt</code></td>
    <td>7</td>
    <td>1</td>
  </tr>
</table>

<p>However, with great power comes great responsibility.
The <code>QueenAnt</code> is governed by three special rules:</p>

<ol>
  <li>If the queen ever has its health reduced to 0, the ants lose.
  You will need to override <code>Ant.reduce_health</code> in <code>QueenAnt</code>
  and call <code>ants_lose()</code> in that case in order to signal to the simulator
  that the game is over.
  (The ants also still lose if any bee reaches the end of a tunnel.)</li>
  <li>There can be only one queen. After the first queen is constructed, any attempt at
  constructing a second queen should result in a <code>DuplicateQueensException</code>. To keep
  track of whether a queen has already been created, you can add an instance variable to the <code>Gamestate</code> class and use it in the <code>__init__</code> of <code>QueenAnt</code>.</li>
  <li>The queen cannot be removed. Attempts to remove the queen
  should have no effect (but should not cause an error). You will need to
  override <code>Ant.remove_from</code> in <code>QueenAnt</code> to enforce this condition.</li>
</ol>

<!-- hack for separate blockquotes -->

<blockquote><p><em>Hint:</em>
You can find each <code>Place</code> in a tunnel behind the <code>QueenAnt</code> by starting at
the ant's <code>place.exit</code> and then repeatedly following its <code>exit</code>.
The <code>exit</code> of a <code>Place</code> at the end of a tunnel is <code>None</code>.</p></blockquote>

<!-- hack for separate blockquotes -->

<blockquote><p><em>Hint:</em>
To avoid doubling an ant's damage twice,
mark the ants that have been doubled in some way,
in a way that persists across calls to <code>QueenAnt.action</code>.</p></blockquote>

<!-- hack for separate blockquotes -->

<blockquote><p><em>Hint:</em>
When doubling the ants' damage,
keep in mind that there can be more than one ant in a <code>Place</code>,
such as if one ant is guarding another.</p></blockquote>

<!-- hack for separate blockquotes -->

<blockquote><p><em>Hint:</em>
Feel free to add new methods to the <code>QueenAnt</code> class!
Also, make sure to look at the <code>double</code> method in <code>Ant</code>.</p></blockquote>

<p>After writing code, test your implementation:</p>

<pre><code>python3 ok &#x2d;q 12</code></pre>


<h3 id="extra-credit-2-pt">Extra Credit (2 pt)</h3>


<p>Before writing any code, read the instructions and test your understanding of the problem:</p>

<pre><code>python3 ok &#x2d;q EC &#x2d;u</code></pre>

<p>Implement two final thrower ants that do zero damage, but instead apply a
temporary "status" on the <code>action</code> method of a <code>Bee</code> instance that they
<code>throw_at</code>. This "status" lasts for a certain number
of turns, after which it ceases to take effect.</p>

<p>We will be implementing two new ants that inherit from <code>ThrowerAnt</code>.</p>

<ul>
  <li><code>SlowThrower</code> throws sticky syrup at a bee, slowing it for 3 turns. When a bee is slowed, it can only move on turns when <code>gamestate.time</code> is even, and can do nothing otherwise. If a bee is hit by syrup while it is already slowed, it is slowed for an additional 3 turns.</li>
  <li><code>ScaryThrower</code> intimidates a nearby bee, causing it to back away instead of
  advancing. (If the bee is already right next to the Hive and cannot go back further,
  it should not move. To check if a bee is next to the Hive, you might find the <code>is_hive</code> instance attribute of <code>Place</code>s useful).  Bees remain scared until they have tried to back away twice. Bees cannot try to back away if they are slowed and <code>gamestate.time</code> is odd. <em>Once a bee has been scared once, it can't be scared ever again.</em></li>
</ul>

<table class="ant">
  <tr>
    <td><b>Class</b></td>
    <td><b>Food Cost</b></td>
    <td><b>Initial Health</b></td>
  </tr>
  <tr>
    <td><img class="img-responsive center-block" src="assets/insects/ant_slow.gif" /> <br> <code>SlowThrower</code></td>
    <td>4</td>
    <td>1</td>
  </tr>
  <tr>
    <td><img class="img-responsive center-block" src="assets/insects/ant_scary.gif" /> <br> <code>ScaryThrower</code></td>
    <td>6</td>
    <td>1</td>
  </tr>
</table>

<p>In order to complete the implementations of these two ants, you will
need to set their class attributes appropriately and implement the <code>slow</code> and <code>scare</code> methods
on <code>Bee</code>, which apply their respective statuses on a particular bee. You may also have to edit some
other methods of <code>Bee</code>.</p>

<!--<video-embed ec-hint>-->

<p>You can run some provided tests, but they are not exhaustive:</p>

<pre><code>python3 ok &#x2d;q EC</code></pre>

<p>Make sure to test your code!  Your code should be able to apply
multiple statuses on a target; each new status applies to the current
(possibly previously affected) action method of the bee.</p>


<h2 id="optional-problems">Optional Problems</h2>

<p><em>Note:</em> 
Optional problems will not receive any extra credit but they're a great way to get more practice and test your understanding!</p>

<h3 id="optional-problem-1">Optional Problem 1</h3>


<p>Before writing any code, read the instructions and test your understanding of the problem:</p>

<pre><code>python3 ok &#x2d;q optional1 &#x2d;u</code></pre>

<p>Implement the <code>NinjaAnt</code>, which damages all <code>Bee</code>s that pass by, but can never
be stung.</p>

<table class="ant">
  <tr>
    <td><b>Class</b></td>
    <td><b>Food Cost</b></td>
    <td><b>Initial Health</b></td>
  </tr>
  <tr>
    <td><img class="img-responsive center-block" src="assets/insects/ant_ninja.gif" /> <br> <code>NinjaAnt</code></td>
    <td>5</td>
    <td>1</td>
  </td>
</table>

<p>A <code>NinjaAnt</code> does not block the path of a <code>Bee</code> that flies by. To implement
this behavior, first modify the <code>Ant</code> class to include a new class attribute
<code>blocks_path</code> that is set to <code>True</code>, then override the value of <code>blocks_path</code> to
<code>False</code> in the <code>NinjaAnt</code> class.</p>

<p>Second, modify the <code>Bee</code>'s method <code>blocked</code> to return <code>False</code> if either
there is no <code>Ant</code> in the <code>Bee</code>'s <code>place</code> or if there is an <code>Ant</code>, but
its <code>blocks_path</code> attribute is <code>False</code>. Now <code>Bee</code>s will just fly past
<code>NinjaAnt</code>s.</p>

<p>Finally, we want to make the <code>NinjaAnt</code> damage all <code>Bee</code>s that fly past.
Implement the <code>action</code> method in <code>NinjaAnt</code> to reduce the health of all <code>Bee</code>s
in the same <code>place</code> as the <code>NinjaAnt</code> by its <code>damage</code> attribute. Similar to
the <code>FireAnt</code>, you must iterate over a potentially changing list of bees.</p>

<blockquote><p><em>Hint</em>: Having trouble visualizing the test cases? Try drawing them out on paper! See the example in <a href="#game-layout">Game Layout</a> for help.</p></blockquote>

<p>After writing code, test your implementation:</p>

<pre><code>python3 ok &#x2d;q optional1</code></pre>

<p>For a challenge, try to win a game using only <code>HarvesterAnt</code>
and <code>NinjaAnt</code>.</p>


<h3 id="optional-problem-2">Optional Problem 2</h3>


<p>We've been developing this ant for a long time in secret. It's so dangerous
that we had to lock it in the super hidden CS88 underground vault, but we
finally think it is ready to go out on the field. In this problem, you'll be
implementing the final ant &mdash; <code>LaserAnt</code>, a <code>ThrowerAnt</code> with a twist.</p>

<blockquote><p><em>Note:</em>
There are no unlocking tests for this question.</p></blockquote>

<table class="ant">
  <tr>
    <td><b>Class</b></td>
    <td><b>Food Cost</b></td>
    <td><b>Initial Health</b></td>
  </tr>
  <tr>
    <td><img class="img-responsive center-block" src="assets/insects/ant_laser.gif" /> <br> <code>LaserAnt</code></td>
    <td>10</td>
    <td>1</td>
  </tr>
</table>

<p>The <code>LaserAnt</code> shoots out a powerful laser, damaging all that dare
to stand in its path. Both <code>Bee</code>s and <code>Ant</code>s, of all types, are at
risk of being damaged by <code>LaserAnt</code>. When a <code>LaserAnt</code> takes its action,
it will damage all <code>Insect</code>s in its place (excluding itself, but including its
container if it has one) and the <code>Place</code>s in front of it, excluding the <code>Hive</code>.</p>

<p>If that were it, <code>LaserAnt</code> would be too powerful for us to contain.
The <code>LaserAnt</code> has a base damage of <code>2</code>. But, <code>LaserAnt</code>'s laser comes with
some quirks. The laser is weakened by <code>0.25</code> each place it travels away from
<code>LaserAnt</code>'s place. Additionally, <code>LaserAnt</code> has limited battery.
Each time <code>LaserAnt</code> actually damages an <code>Insect</code> its
laser's total damage goes down by <code>0.0625</code> (1/16).
If <code>LaserAnt</code>'s damage becomes negative due to these restrictions,
it simply does 0 damage instead.</p>

<blockquote><p>The exact order in which things are damaged within a turn is unspecified.</p></blockquote>

<p>In order to complete the implementation of this ultimate ant, read
through the <code>LaserAnt</code> class, set the class attributes appropriately,
and implement the following two functions:</p>

<ol>
  <li><code>insects_in_front</code> is an instance method, called by the <code>action</code> method,
  that returns a dictionary where each key is an <code>Insect</code> and each
  corresponding value is the distance (in places) that that <code>Insect</code> is away
  from <code>LaserAnt</code>. The dictionary should include all <code>Insects</code> on the same
  place or in front of the <code>LaserAnt</code>, excluding <code>LaserAnt</code> itself.</li>
  <li><code>calculate_damage</code> is an instance method that takes in <code>distance</code>, the
  distance that an insect is away from the <code>LaserAnt</code> instance. It
  returns the damage that the <code>LaserAnt</code> instance should afflict based on:</li>
  <li>The <code>distance</code> away from the <code>LaserAnt</code> instance that an <code>Insect</code> is.</li>
  <li>The number of <code>Insects</code> that this <code>LaserAnt</code> has damaged, stored in
  the <code>insects_shot</code> instance attribute.</li>
</ol>

<p>In addition to implementing the methods above, you may need to modify, add,
or use class or instance attributes in the <code>LaserAnt</code> class as needed.</p>

<p>You can run the provided test, but it is not exhaustive:</p>

<pre><code>python3 ok &#x2d;q optional2</code></pre>

<p>Make sure to test your code!</p>


<h2 id="project-submission">Project Submission</h2>

<p>Now that you're all done you can submit to Gradescope! Remember if you worked with a partner to add them on Gradescope.</p>

<p><strong>You are now done with the project!</strong>  If you haven't yet, you should try
playing the game!</p>

<pre><code>python3 gui.py [&#x2d;h] [&#x2d;d DIFFICULTY] [&#x2d;w] [&#x2d;&#x2d;food FOOD]</code></pre>

<p><strong>Acknowledgments:</strong> Tom Magrino and Eric Tzeng developed this project
with John DeNero. Jessica Wan contributed the original artwork. Joy Jeng and
Mark Miyashita invented the queen ant. Many others have contributed to
the project as well!</p>

<p>The new concept artwork was drawn by Alana Tran, Andrew Huang, Emilee Chen,
Jessie Salas, Jingyi Li, Katherine Xu, Meena Vempaty, Michelle Chang, and Ryan
Davis.</p>



<h2 id='submission'>Submission</h2>

<p>
    When you are done, submit your file to <a href="https://www.gradescope.com/courses/693229" target="_blank">Gradescope</a>.
    You only need to upload the following files:
    
<ul>
  <li><code>ants.py</code></li>
</ul>

    You may submit more than once before the deadline; only the final submission will be graded.
    It is your responsibility to check that the autograder on Gradescope runs as expected after
    you upload your submission.
</p>

<p>
  <strong>IMPORTANT:</strong> If you are working with a partner, <strong>only one person should submit to
  Gradescope, and then add the second person to the submission on Gradescope.</strong> See this
  <a href="https://help.gradescope.com/article/m5qz2xsnjy-student-add-group-members">article</a>
  if you're unsure how to do this. <strong>You must add your partner to your Gradescope submission
  every time you resubmit.</strong>
</p>
  </div>

  <div class='col-md-3'>
    <nav class='hidden-print hidden-sm hidden-xs sidebar'>
      <ul>
  <li><a href="#download-starter-files">Download starter files</a></li>
  <li><a href="#logistics">Logistics</a></li>
  <li><a href="#the-game">The Game</a></li>
  <ul>
  <li><a href="#core-concepts">Core concepts</a></li>
  <li><a href="#core-classes">Core classes</a></li>
  <li><a href="#game-layout">Game Layout</a></li>
  <li><a href="#object-map">Object map</a></li>
  <li><a href="#playing-the-game">Playing the game</a></li>
</ul>

  <li><a href="#getting-started-videos">Getting Started Videos</a></li>
  <li><a href="#phase-1-basic-gameplay">Phase 1: Basic gameplay</a></li>
  <ul>
  <li><a href="#problem-0-0-pt">Problem 0 (0 pt)</a></li>
  <li><a href="#problem-1-3-pt">Problem 1 (3 pt)</a></li>
  <li><a href="#problem-2-3-pt">Problem 2 (3 pt)</a></li>
  <li><a href="#problem-3-3-pt">Problem 3 (3 pt)</a></li>
</ul>

  <li><a href="#phase-2-ants">Phase 2: Ants!</a></li>
  <ul>
  <li><a href="#problem-4-5-pt">Problem 4 (5 pt)</a></li>
  <li><a href="#problem-5-7-pt">Problem 5 (7 pt)</a></li>
</ul>

  <li><a href="#phase-3-more-ants">Phase 3: More Ants!</a></li>
  <ul>
  <li><a href="#problem-6-3-pt">Problem 6 (3 pt)</a></li>
  <li><a href="#problem-7-7-pt">Problem 7 (7 pt)</a></li>
  <li><a href="#problem-8-7-pt">Problem 8 (7 pt)</a></li>
  <li><a href="#problem-9-3-pt">Problem 9 (3 pt)</a></li>
</ul>

  <li><a href="#phase-4-water-and-might">Phase 4: Water and Might</a></li>
  <ul>
  <li><a href="#problem-10-3-pt">Problem 10 (3 pt)</a></li>
  <li><a href="#problem-11-3-pt">Problem 11 (3 pt)</a></li>
  <li><a href="#problem-12-7-pt">Problem 12 (7 pt)</a></li>
  <li><a href="#extra-credit-2-pt">Extra Credit (2 pt)</a></li>
</ul>

  <li><a href="#optional-problems">Optional Problems</a></li>
  <ul>
  <li><a href="#optional-problem-1">Optional Problem 1</a></li>
  <li><a href="#optional-problem-2">Optional Problem 2</a></li>
</ul>

  <li><a href="#project-submission">Project Submission</a></li>
</ul>

    </nav>
  </div>

</div>
    </div>

    <script src="//cdn.jsdelivr.net/jquery/2.1.3/jquery.min.js"></script>
    <script src="/sp24/assets/js/bootstrap.min.js"></script>
    <!-- TODO: Move to specific pages... -->
    <script src="/sp24/assets/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script>
  $('.sidebar ul').addClass('nav nav-stacked');
  $('body').scrollspy({
    target: '.sidebar',
    offset: 40
  });
</script>

  </body>
</html>
